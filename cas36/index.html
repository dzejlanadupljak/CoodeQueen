<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>Document</title> 
</head>
<body>

    <script>
    // ---------------------------
    // PRIMER 1: PROMISE - dostava pice
    // ---------------------------

    // Promise je obećanje da će se neki posao završiti u budućnosti.
    // On može da završi uspešno (resolve) ili neuspešno (reject).

    // const dostaviPicu= new Promise((resolve, reject)=>{
    //     const picaStigla=false   // promenljiva koja čuva stanje (da li je pica stigla ili ne)
    //     if(picaStigla){
    //         resolve("stigla je")   // resolve znači: posao je uspeo
    //     }else{
    //         reject("nije stigla")  // reject znači: posao nije uspeo
    //     }
    // })
    
    // dostaviPicu
    // .then((rezultat)=>{
    //     console.log("then", rezultat)   // .then() se izvršava ako je Promise uspešan
    // })
    // .catch((greska)=>{
    //     console.log("catch", greska)   // .catch() se izvršava ako je Promise neuspešan
    // })
    // .finally(()=>{
    //     console.log("dostava je izvrsena") // .finally() se izvršava uvek, bez obzira na ishod
    // })


    // ---------------------------
    // PRIMER 2: FETCH - preuzimanje korisnika sa servera
    // ---------------------------

    // fetch() je ugrađena funkcija u JavaScript-u za slanje HTTP zahteva (traženje podataka sa servera).
    // Kada podaci stignu, koristi se .then() da se obradi odgovor.
    
    // fetch("https://jsonplaceholder.typicode.com/users")  // šalje zahtev ka API-ju
    // .then((response)=>response.json())   // response.json() pretvara odgovor u JSON format (čitljiv JS objekat)
    // .then((data)=>{
    //     console.log("podaci su stigli", data) // ovde dobijamo i ispisujemo podatke
    // })
    // .catch((error)=>{
    //     console.log("doslo je do greske", error) // ako server ne radi ili adresa nije dobra, hvata se greška
    // })
    // .finally(()=>{
    //     console.log("zavrseno je cekanje")  // uvek se izvrši na kraju, bilo da je uspešno ili neuspešno
    // })


    // ---------------------------
    // ZADATAK 1: Promise - polaganje testa
    // ---------------------------

    // Funkcija polaganjeTesta vraća Promise
    // Prima broj (rezultat) i proverava da li je veći ili jednak 50
    // Ako jeste => resolve (položio si)
    // Ako nije => reject (pao si)
    function polaganjeTesta(rezultat) {
      return new Promise((resolve, reject) => {  // pravimo novi Promise
        if (rezultat >= 50) {
          resolve("Položio si test!");  // uspešan ishod
        } else {
          reject("Pao si na testu.");   // neuspešan ishod
        }
      });
    }

    const mojRezultat = 65; // Ovde čuvamo rezultat testa (menjaj broj da probaš oba slučaja)

    // Ovde pozivamo funkciju i radimo sa Promise-om
    polaganjeTesta(mojRezultat)
      .then((poruka) => {  // Ako je Promise uspešan
        console.log(poruka); 
      })
      .catch((poruka) => { // Ako je Promise neuspešan
        console.log(poruka);
      });

    // ---------------------------
    // ZADATAK 2: FETCH korisnika
    // ---------------------------

    // Zadatak: Prikazati samo imena i mejlove korisnika iz API-ja
    // fetch("https://jsonplaceholder.typicode.com/users")
    // .then((response)=>response.json())
    // .then((data)=>{
    //     data.forEach(user => {
    //         console.log("Ime:", user.name, " | Email:", user.email)
    //     })
    // })
    // .catch((error)=>{
    //     console.log("Greška:", error)
    // })

    // ---------------------------
    // ZADATAK 3: FETCH sa greškom
    // ---------------------------

    // fetch("https://jsonplaceholder.typicode.com/userzz") // namerno pogrešna adresa
    // .then((response)=>response.json())
    // .then((data)=>{
    //     console.log(data)
    // })
    // .catch((error)=>{
    //     console.log("Uhvaćena greška:", error) // ovde će ispisati grešku
    // })
    

    </script>
</body>
</html>
